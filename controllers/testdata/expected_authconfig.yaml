apiVersion: authorino.kuadrant.io/v1beta1
kind: AuthConfig
metadata:
  name: meshified-and-authorized-ns-protection
  namespace: meshified-and-authorized-ns
  labels:
    authorino/topic: odh
spec:
  hosts:
    - opendatahub-odh-gateway-525eca1d5089dbdc-istio-system.apps-crc.testing
  identity:
    - name: authorized-service-accounts
      kubernetes:
        audiences:
          - "https://kubernetes.default.svc"
  authorization:
    - name: k8s-rbac
      kubernetes:
        user:
          valueFrom: { authJSON: auth.identity.username }
  response:
    - name: x-auth-data
      json:
        properties:
          - name: username
            valueFrom: { authJSON: auth.identity.username }
  denyWith:
    unauthorized:
      message:
        value: "Access Denied"
